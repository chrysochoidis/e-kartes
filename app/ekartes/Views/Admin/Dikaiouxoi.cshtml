@model PagedList.IPagedList<Ekartes.Models.Dikaiouxos>
@using PagedList.Mvc;
<link href="~/Content/PagedList.css" />

@{
    ViewBag.Title = "Εγγεγραμμένοι Δικαιούχοι";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<div style="border: 3px solid; border-color: gray; margin-left: auto; margin-right: auto; padding: 0px; border-radius: 1em; background-color: #303030; ">
    <h2 style="color:white; text-align: center;">Εγγεγραμμένοι Δικαιούχοι</h2>
</div>

<hr>
<div class="form-horizontal">
    <div style="border: 2px solid; margin-left:auto; margin-right:auto; padding: 0px; border-radius: 1em; background-color: white;">
        <div style="background-color: lightgray; border-bottom: 2px solid; border-bottom-color: black; padding: 5px; border-top-right-radius: 1em; border-top-left-radius: 1em;">
            <br />
            <br />
        </div>
        <br />

        @using (Html.BeginForm("Dikaiouxoi", "Admin", FormMethod.Get))
        {
            <p style="text-align:center;">
                Αναζήτηση: @Html.TextBox("searchString", ViewBag.CurrentFilter as string)
                <input type="submit" value="Αναζήτηση" />
            </p>
        }

        <table class="table">
            <tr>
                <th>Α/Α</th>
                <th>
                    Κατάσταση
                </th>
                <th>
                    Ρόλος
                </th>
                <th>
                    @Html.ActionLink("ΑΜ", "Dikaiouxoi", new { sortOrder = ViewBag.AMSortParam, currentFilter = ViewBag.CurrentFilter })
                </th>
                <th>
                    @Html.ActionLink("Επίθετο", "Dikaiouxoi", new { sortOrder = ViewBag.EpithetoSortParam, currentFilter = ViewBag.CurrentFilter })
                </th>
                <th>
                    Όνομα
                </th>
                <th>
                    ΑΤ
                </th>
                <th>
                    Μονάδα
                </th>
                <th>
                    Βαθμός
                </th>
                <th>
                    Όπλο-Σώμα
                </th>
                <th>Να Γίνει</th>
                <th></th>
               
            </tr>
            @{
                int count = 0;
                foreach (var item in Model)
                {

                    count++;
                    <tr>
                        <td>@count</td>
                        <td>
                            @Html.DisplayFor(modelItem => item.KatastasiD)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Rolos)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.AM)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Epitheto)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Onoma)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.AT)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Monada)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Vathmos)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.O_S)
                        </td>
                        <td>
                            @{
                                if (item.Rolos == Ekartes.Models.Rolos.User)
                                {
                                    <button class="btn btn-primary">@Html.ActionLink("Admin", "MakeAdmin", new { id = item.ID }, new { @style = "color:white" })</button>
                                }

                                if (item.Rolos == Ekartes.Models.Rolos.Admin)
                                {
                                    <button class="btn btn-primary">@Html.ActionLink("User", "MakeUser", new { id = item.ID }, new { @style = "color:white" })</button>
                                }
                             }

                        </td>

                        <td>
                            @Html.ActionLink("Λεπτομέρειες", "DetailsDikaiouxou", new { id = item.ID }) |
                            @Html.ActionLink("Επεξεργασία", "EditD", new  { id = item.ID}) |
                            @Html.ActionLink("Μέλη", "MeliDikaiouxou", new { id = item.ID }) |
                            @Html.ActionLink("Προσθήκη Μέλους", "CreateMelos", new  { id = item.ID})
                        </td>
                        
                    </tr>
                }
            }
        </table>
        <br />
        <div style="text-align:center">
            Σελίδα @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) από @Model.PageCount
            @Html.PagedListPager(Model, page => Url.Action("Dikaiouxoi",
                                            new { page, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter }))
        </div>
        <div style="background-color: lightgray; border-top: 2px solid; border-top-color: black; padding: 5px; border-bottom-right-radius: 1em; border-bottom-left-radius: 1em;">

            @Html.ActionLink("Πίσω", "Home") |
            @Html.ActionLink("Δημιουργία Νέου Δικαιούχου", "CreateDikaiouxos")
            <br />
            <br />
        </div>
    </div>
</div>
